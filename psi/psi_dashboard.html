<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard do Psicólogo</title>
    
    <link rel="stylesheet" href="psi_dashboard.css"> 
    
    <script src="https://js.stripe.com/v3/"></script>
    <script src="https://unpkg.com/imask"></script>
    <style>
        /* Correção Visual: Toast sempre no topo */
        #toast-container {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 2147483647 !important;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        /* Garanta que o dashboard use Flexbox */
        #dashboard-container {
            display: flex;
            min-height: 100vh;
        }
        /* Logo em Texto (Provisório) */
        .logo-text {
            font-family: 'New Kansas', serif;
            color: #fff;
            font-size: 1.8rem;
            text-align: center;
            margin: 0 auto 20px auto;
            display: block;
            letter-spacing: 1px;
        }
        /* Estilo básico para não quebrar se faltar CSS */
        .hidden { display: none !important; }
    </style>
</head>
<body>

    <div id="toast-container"></div>

    <div id="dashboard-container" style="display: none;"> 
        
        <aside class="dashboard-sidebar"> <div class="sidebar-header">
                <h2 class="logo-text">Girassol</h2>
            </div>
            
            <div class="sidebar-user-block"> <img id="psi-sidebar-photo" src="https://placehold.co/70x70" alt="Foto Perfil">
                <div class="user-info">
                    <p id="psi-sidebar-name">Carregando...</p>
                </div>
                <a id="btn-view-public-profile" href="#" target="_blank">Ver como Paciente</a>
            </div>

            <nav class="sidebar-nav">
                <ul>
                    <li><a href="#" data-page="psi_visao_geral.html">Visão Geral</a></li>
                    <li><a href="#" data-page="psi_meu_perfil.html">Meu Perfil</a></li>
                    <li><a href="#" data-page="psi_assinatura.html">Assinatura e Pagamentos</a></li>
                    <li><a href="#" data-page="psi_caixa_entrada.html">Caixa de Entrada</a></li>
                    <li><a href="#" data-page="psi_comunidade.html">Comunidade Q&A</a></li>
                </ul>
            </nav>
            
            <div class="sidebar-footer">
                <button id="btn-logout" style="background:none; border:none; color: #FFEE8C; cursor: pointer; font-weight: bold;">Sair</button>
            </div>
        </aside>

        <main id="main-content" class="dashboard-main">
            </main>
    </div>

    <div id="payment-modal" class="custom-modal-overlay" style="display: none;">
        <div class="custom-modal-box">
            <button id="btn-close-modal-x" style="float: right; background:none; border:none; font-size:1.2rem; cursor:pointer;">✕</button>
            <h3 style="margin-top:0;">Finalizar Assinatura</h3>
            <div id="payment-element"></div>
            <div style="margin-top: 15px; display: flex; gap: 10px;">
                <input type="text" id="modal-cupom-input" placeholder="Cupom de desconto" style="flex:1; padding: 8px; border: 1px solid #ddd; border-radius: 4px;">
                <button id="btn-aplicar-cupom-modal" style="padding: 8px 15px; background: #eee; border: none; border-radius: 4px; cursor: pointer;">Aplicar</button>
            </div>
            <div id="payment-message" class="hidden" style="margin-top: 10px;"></div>
            <form id="payment-form">
                <button id="btn-confirmar-stripe" style="margin-top: 20px; width: 100%; background: #1B4332; color: #fff; padding: 12px; border: none; border-radius: 6px; font-weight: bold; cursor: pointer;">Pagar Agora</button>
            </form>
        </div>
    </div>
    
    <div id="modal-reativacao" class="custom-modal-overlay" style="display: none;">
        <div class="custom-modal-box">
            <div style="margin-bottom: 20px; color: #F59E0B;">
               <svg width="50" height="50" fill="currentColor" viewBox="0 0 16 16"><path d="M8 11a3 3 0 1 1 0-6 3 3 0 0 1 0 6zm0 1a4 4 0 1 0 0-8 4 4 0 0 0 0 8zM8 0a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 0zm0 13a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 13zm8-5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2a.5.5 0 0 1 .5.5zM3 8a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2A.5.5 0 0 1 3 8z"/></svg>
            </div>
            <h3 style="margin-top:0;">Que bom ter você de volta!</h3>
            <p style="color:#666; line-height: 1.5;">Ao reativar, sua assinatura continuará válida e renovará na data original. Nenhuma cobrança será feita hoje.</p>
            <div style="display: flex; gap: 10px; justify-content: center; margin-top: 20px;">
                <button id="btn-fechar-modal-reativacao" style="padding: 10px 20px; background: #fff; border: 1px solid #ddd; border-radius: 6px; cursor: pointer;">Pensar melhor</button>
                <button id="btn-confirmar-reativacao" style="padding: 10px 20px; background: #F59E0B; color: #fff; border:none; border-radius: 6px; font-weight: bold; cursor: pointer;">Sim, manter meu plano</button>
            </div>
        </div>
    </div>

    <script src="../config.js"></script>
    <script src="psi_dashboard.js"></script>
</body>
</html>