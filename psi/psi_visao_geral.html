<div class="main-header">
    <div class="header-content">
        <h1>Visão Geral</h1>
        <p id="psi-welcome-name">Bem-vindo(a)!</p>
    </div>
</div>

<div id="alert-complete-profile" style="display: none; background-color: #fff3cd; color: #856404; padding: 15px; border-radius: 8px; border: 1px solid #ffeeba; margin-bottom: 25px; align-items: center; justify-content: space-between; box-shadow: 0 2px 4px rgba(0,0,0,0.05);">
    <div style="display: flex; align-items: center; gap: 10px;">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"></path>
            <line x1="12" y1="9" x2="12" y2="13"></line>
            <line x1="12" y1="17" x2="12.01" y2="17"></line>
        </svg>
        <span><strong>Atenção:</strong> Seu perfil está incompleto. Pacientes não conseguirão te encontrar.</span>
    </div>
    <button onclick="document.querySelector('[data-page=\'psi_meu_perfil.html\']').click()" style="background: #856404; color: white; border: none; padding: 8px 16px; border-radius: 6px; cursor: pointer; font-weight: 600; font-size: 0.9rem;">
        Completar Agora
    </button>
</div>

<div class="kpi-grid">
    <div class="kpi-card">
        <h3>Cliques de Contato Recebidos</h3>
        <p class="kpi-value" id="kpi-cliques-contato">0 / 15</p> <div class="progress-bar-kpi">
            <div class="progress-bar-kpi-fill" id="kpi-progress-bar" style="width: 0%;"></div>
        </div>
        <span class="kpi-link">Pacientes que clicaram para iniciar uma conversa.</span>
    </div>
    <div class="kpi-card">
        <h3>Vezes que seu Perfil foi Recomendado</h3>
        <p class="kpi-value" id="kpi-recomendacoes">0</p>
        <span class="kpi-link">O número de vezes que seu perfil apareceu nos resultados.</span>
    </div>
    <div class="kpi-card">
        <h3>Visitas ao seu Perfil</h3>
        <p class="kpi-value" id="kpi-visitas">0</p>
        <span class="kpi-link">Pacientes que clicaram para visualizar seu perfil completo.</span>
    </div>
    <div class="kpi-card">
        <h3>Taxa de Interesse (Cliques por Visita)</h3>
        <p class="kpi-value" id="kpi-taxa-interesse">0%</p>
        <span class="kpi-link">De quem visitou seu perfil, a porcentagem que iniciou o contato.</span>
    </div>
</div>

<script>
    (function() {
        // 1. Pega os dados do psicólogo que já estão na memória (psi_dashboard.js)
        if (typeof psychologistData !== 'undefined' && psychologistData) {
            
            // Atualiza o nome
            const primeiroNome = psychologistData.nome.split(' ')[0];
            document.getElementById('psi-welcome-name').textContent = `Bem-vindo(a), ${primeiroNome}!`;
            
            // 2. Verifica se o perfil está completo
            // Consideramos incompleto se não tiver telefone OU bio OU CRP validado
            if (!psychologistData.telefone || !psychologistData.bio || psychologistData.status === 'pending') {
                document.getElementById('alert-complete-profile').style.display = 'flex';
            }

            // 3. (Opcional) Aqui você poderia buscar os KPIs reais do backend no futuro
            // Por enquanto, deixamos os placeholders zerados ou estáticos.
        }
    })();
</script>