<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard do Psicólogo</title>
    <link rel="stylesheet" href="../css/style.css"> 
    <script src="https://js.stripe.com/v3/"></script>
    <script src="https://unpkg.com/imask"></script>
    <style>
        /* Correção Visual: Toast sempre no topo */
        #toast-container {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 2147483647 !important;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        /* Garanta que o dashboard use Flexbox */
        #dashboard-container {
            display: flex;
            min-height: 100vh;
        }
        /* Estilo básico para não quebrar se faltar CSS */
        .hidden { display: none !important; }
    </style>
</head>
<body>

    <div id="toast-container"></div>

    <div id="dashboard-container" style="display: none;"> <aside class="sidebar">
            <div class="sidebar-header">
                <img src="../assets/logo_girassol.png" alt="Logo" class="logo">
            </div>
            
            <div class="user-info-sidebar">
                <img id="psi-sidebar-photo" src="https://placehold.co/70x70" alt="Foto Perfil">
                <h3 id="psi-sidebar-name">Carregando...</h3>
                <a id="btn-view-public-profile" href="#" target="_blank" class="btn-ver-perfil">Ver como Paciente</a>
            </div>

            <nav>
                <ul class="sidebar-nav">
                    <li><a href="#" data-page="psi_visao_geral.html">Visão Geral</a></li>
                    <li><a href="#" data-page="psi_meu_perfil.html">Meu Perfil</a></li>
                    <li><a href="#" data-page="psi_assinatura.html">Assinatura e Pagamentos</a></li>
                    <li><a href="#" data-page="psi_caixa_entrada.html">Caixa de Entrada</a></li>
                    <li><a href="#" data-page="psi_comunidade.html">Comunidade Q&A</a></li>
                </ul>
            </nav>
            
            <div class="sidebar-footer">
                <button id="btn-logout">Sair</button>
            </div>
        </aside>

        <main id="main-content">
            </main>
    </div>

    <div id="payment-modal" class="custom-modal-overlay" style="display: none;">
        <div class="custom-modal-box">
            <button id="btn-close-modal-x" style="float: right;">X</button>
            <h3>Finalizar Assinatura</h3>
            <div id="payment-element"></div>
            <div style="margin-top: 15px;">
                <input type="text" id="modal-cupom-input" placeholder="Cupom de desconto">
                <button id="btn-aplicar-cupom-modal">Aplicar</button>
            </div>
            <div id="payment-message" class="hidden"></div>
            <form id="payment-form">
                <button id="btn-confirmar-stripe" style="margin-top: 20px; width: 100%;">Pagar Agora</button>
            </form>
        </div>
    </div>
    
    <div id="modal-reativacao" class="custom-modal-overlay" style="display: none;">
        <div class="custom-modal-box">
            <div style="margin-bottom: 20px; color: #F59E0B;">
               <svg width="50" height="50" fill="currentColor" viewBox="0 0 16 16"><path d="M8 11a3 3 0 1 1 0-6 3 3 0 0 1 0 6zm0 1a4 4 0 1 0 0-8 4 4 0 0 0 0 8zM8 0a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 0zm0 13a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 13zm8-5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2a.5.5 0 0 1 .5.5zM3 8a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2A.5.5 0 0 1 3 8z"/></svg>
            </div>
            <h3>Que bom ter você de volta!</h3>
            <p>Ao reativar, sua assinatura continuará válida e renovará na data original. Nenhuma cobrança será feita hoje.</p>
            <div style="display: flex; gap: 10px; justify-content: center; margin-top: 20px;">
                <button id="btn-fechar-modal-reativacao">Pensar melhor</button>
                <button id="btn-confirmar-reativacao" style="background: #F59E0B; color: #fff; border:none;">Sim, manter meu plano</button>
            </div>
        </div>
    </div>

    <script src="js/config.js"></script>
    <script src="js/psi_dashboard.js"></script>
</body>
</html>